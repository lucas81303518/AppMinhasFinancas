unit DAO.FormasDePagamento;

interface

uses
  Generics.Collections, model.FormaDePagamento,
  UIDAOFormasDePagamento, System.JSON;

type
  TDAOFormasPagamento = class(TInterfacedObject, IDAOFormasPagamento)
  private
    function MontaJson(AFormaPagamento: TFormaPagamento): TJSONObject;
    function MontaObject(JSONObject: TJSONObject): TFormaPagamento;
  public
    function Add(AFormaPagamento: TFormaPagamento): Boolean;
    function Update(AFormaPagamento: TFormaPagamento): Boolean;
    function GetAll: TObjectList<TFormaPagamento>;
    function Get(Id: Integer): TFormaPagamento;
  end;

implementation

uses
  Dmodulo, system.Utils, System.SysUtils;

{ TDAOFormasPagamento }
function TDAOFormasPagamento.Add(AFormaPagamento: TFormaPagamento): Boolean;
begin

end;

function TDAOFormasPagamento.Get(Id: Integer): TFormaPagamento;
var
  JSONObject: TJSONObject;
begin
  JSONObject := DmPrincipal.Configuracoes.ConfigREST.Get('FormasPagamento/', id.ToString);
  Result := MontaObject(JSONObject);
end;

function TDAOFormasPagamento.GetAll: TObjectList<TFormaPagamento>;
var
  JSONObject: TJSONObject;
begin
  Result := TObjectList<TFormaPagamento>.create;
  JSONObject := DmPrincipal.Configuracoes.ConfigREST.Get('FormasPagamento');
  Result := MontaObject(JSONObject);
end;

function TDAOFormasPagamento.MontaJson(
  AFormaPagamento: TFormaPagamento): TJSONObject;
begin
  Result := TJSONObject.Create;
  Result.AddPair('Nome', AFormaPagamento.Nome);
  Result.AddPair('Valor', AFormaPagamento.Valor);
end;

function TDAOFormasPagamento.MontaObject(
  JSONObject: TJSONObject): TFormaPagamento;
begin
  Result := TFormaPagamento.Create;
  Result.Id    := JSONObject.GetValue<Integer>('id');
  Result.Nome  := JSONObject.GetValue<string>('nome');
  Result.Valor := JSONObject.GetValue<Currency>('valor');
end;

function TDAOFormasPagamento.Update(AFormaPagamento: TFormaPagamento): Boolean;
begin

end;

end.
